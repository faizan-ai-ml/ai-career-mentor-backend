# Phase 3: AI Resume Analysis & Smart Roadmap

## Goal Description
We are building the **"Startup Intelligence"** layer. This phase transforms the app from a simple data collector into an **AI Career Coach**.
The AI will:
1.  **Analyze Resumes**: Give a score (0-100), identify missing keywords, and suggest improvements.
2.  **Generate Roadmaps**: Create a personalized learning path based on the user's current level (Beginner vs. Student with Resume).
3.  **Chat Advisor**: (Foundation) Allow the user to ask questions about their career.

## User Review Required
> [!IMPORTANT]
> **AI Provider**: We are using **Gemini 1.5 Flash** (via OpenRouter/Google) as it is fast, cheap, and smart enough for this use case.
> **Prompt Engineering**: This is critical. We will need to iterate on the system prompts to ensure the AI sounds like a "Professional Mentor", not a robot.

## Proposed Changes

### Backend (`d:\ai-career-mentor-backend`)

### Phase 3.5: Interactive Career Counselor (New!)
The user wants a dynamic "Consultation" before generating the roadmap.

#### [NEW] [app/api/ai_features.py] (Update)
- `POST /ai/career-counselor`: Input: User answers. Output: Suggested Career Paths.

#### [NEW] [Android Screens]
- `CareerCounselorScreen.kt`:
    1.  **Step 1**: "Do you know your goal?" (Yes/No)
    2.  **Step 2 (No)**: **The "Simulation" Assessment (3 Key Questions)**:
        *   *Q1 (Blank Page)*: "You need to build an app. First step? (A) Draw the design. (B) Write the logic."
        *   *Q2 (Jellybeans)*: "Guess the number in a jar. (A) Trust your gut. (B) Count and multiply."
        *   *Q3 (Broken WiFi)*: "WiFi dies. (A) Restart and hope. (B) Google the error lights."
    3.  **Step 3**: AI analyzes "Thinking Style" -> Suggests Role (e.g., "Frontend Dev" because you chose Design + Gut).
    4.  **Step 4**: User picks one -> Generates Roadmap.

#### [MODIFY] [app/services/ai_service.py](file:///d:/ai-career-mentor-backend/app/services/ai_service.py)
- Implement [analyze_resume(text)](file:///d:/ai-career-mentor-backend/app/services/ai_service.py#9-41): Returns JSON {score, strengths, weaknesses, missing_skills}.
- Implement [generate_roadmap(profile)](file:///d:/ai-career-mentor-backend/app/services/openrouter_service.py#146-198): Returns JSON list of "Milestones" (e.g., "Learn SQL Basics", "Build a Portfolio Project").

#### [NEW] [app/api/ai_features.py](file:///d:/ai-career-mentor-backend/app/api/ai_features.py)
- `POST /ai/analyze-resume`: Trigger analysis for uploaded resume.
- `POST /ai/improve-text`: Input: "i managed team", Output: "Orchestrated a cross-functional team of 5..." (Startup Feature!)
- `POST /ai/roadmap`: Generate roadmap based on profile.

### Android App (`e:\ai-career-mentor-android`)
#### [NEW] [DashboardScreen.kt upgrades]
- **"Resume Score Card"**: Shows a circular progress bar with the score.
- **"Roadmap View"**: A vertical timeline of steps generated by AI.

#### [NEW] [RoadmapViewModel.kt]
- Handle fetching and displaying the AI roadmap.

## Startup "X-Factor" Features (To be built on top of this)
Once this "Brain" is active, we can easily add:
1.  **"Fix It For Me" Button**: AI rewrites the resume bullet points.
2.  **"Mock Interview"**: AI generates questions based on the *weaknesses* it found.

## Verification Plan
1.  **Test Manual Config**: User B (Beginner) -> "Generate Roadmap" -> AI returns "Learn Python variables..."
2.  **Test Resume**: User A (Resume) -> "Analyze" -> AI returns "Score: 75/100. Missing: Docker".

### Phase 6: Career Intelligence Infrastructure (The "Co-Founder" Layer)
We are building the data moat ("Career Intelligence Graph").

#### [NEW] [app/models/analytics.py]
- `UserEvent` Model: Stores raw behavioral signals (user_id, event_type, metadata).

#### [NEW] [app/services/analytics_service.py]
- `track_event()`: Safe logging wrapper to ensure analytics never crash the app.

#### [MODIFY] [app/api/ai_features.py]
- Inject tracking into critical User Journeys:
    - `resume_analyzed` (Capture Score)
    - `roadmap_generated` (Capture Goal & Duration)
    - `counselor_completed` (Capture Archetype)

### Deferred Intelligence Modules (Future Phases)
These modules are designed but deferred:
1.  **Weekly Check-In Agent**: Scheduled jobs (Celery/APScheduler) to audit progress.
2.  **Career Readiness Score**: Calculation engine aggregating Skills + Market + Behavior.
3.  **Market Intelligence**: Job board scraping integration.
4.  **Outcome Loop**: Feedback form after 8 weeks ("Did you get hired?").
